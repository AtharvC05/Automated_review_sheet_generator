<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Review-II Form</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/common-styles.css') }}">
</head>
<body>
      <div class="page-header">
    <div class="header-center">
        <h1>Project Review - II</h1>
    </div>
     <div class="menu-container">
        <button class="menu-toggle" onclick="toggleMenu()">
            <span class="menu-line"></span>
            <span class="menu-line"></span>
            <span class="menu-line"></span>
        </button>
        
        <div class="menu-dropdown" id="menuDropdown">
            <!-- Database Management -->
            <a href="/data-manager" class="menu-item">
                <span class="icon">üóÑÔ∏è</span>
                Database Manager
            </a>
            <a href="/scheduler" class="menu-item current">
                <span class="icon">üìÖ</span>
                Review Scheduler
            </a>
            <div class="menu-divider"></div>
            
            <!-- Review Pages -->
            <a href="/review1" class="menu-item">
                <span class="icon">üìù</span>
                Review I - Scope
            </a>
            
            <a href="/review2" class="menu-item">
                <span class="icon">üîç</span>
                Review II - Design
            </a>
            
            <a href="/review3" class="menu-item">
                <span class="icon">‚öôÔ∏è</span>
                Review III - Implementation
            </a>
            
            <a href="/review4" class="menu-item">
                <span class="icon">üß™</span>
                Review IV - Testing
            </a>
            
            <a href="/review5" class="menu-item">
                <span class="icon">üìä</span>
                Review V - Final
            </a>
            
            <div class="menu-divider"></div>
            
            <!-- Additional Options -->
            <a href="/" class="menu-item">
                <span class="icon">üè†</span>
                Home
            </a>
        </div>
    </div>
</div>
<div class="content-wrapper">
    <!-- Your form goes here -->


    <form id="form-data">
      
        <label for="group_id">Group ID:</label>
        <input type="text" id="group_id" name="group_id" required placeholder="eg: BIA-01">

        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required>

        <div class="section">
            <h3>DESIGN</h3>

            <!-- Questions 1-5 (Section 2.1) -->
            <div class="question">
                <label>1. Are requirements reflected in the system architecture?</label>
                <div class="radio-group">
                    <input type="radio" id="des1-yes" name="2.1.1id" value="Y" required><label for="des1-yes">Yes</label>
                    <input type="radio" id="des1-no" name="2.1.1id" value="N"><label for="des1-no">No</label>
                    <input type="radio" id="des1-na" name="2.1.1id" value="NA"><label for="des1-na">N/A</label>
                    <input type="radio" id="des1-nc" name="2.1.1id" value="NC"><label for="des1-nc">NC</label>
                </div>
            </div>

            <div class="question">
                <label>2. Does the design support both project (product) and project goals?</label>
                <div class="radio-group">
                    <input type="radio" id="des2-yes" name="2.1.2id" value="Y" required><label for="des2-yes">Yes</label>
                    <input type="radio" id="des2-no" name="2.1.2id" value="N"><label for="des2-no">No</label>
                    <input type="radio" id="des2-na" name="2.1.2id" value="NA"><label for="des2-na">N/A</label>
                    <input type="radio" id="des2-nc" name="2.1.2id" value="NC"><label for="des2-nc">NC</label>
                </div>
            </div>

            <!-- Questions 3-16 following same pattern -->
            <div class="question">
                <label>3. Does the design address all the issues from the requirements?</label>
                <div class="radio-group">
                    <input type="radio" id="des3-yes" name="2.1.3id" value="Y" required><label for="des3-yes">Yes</label>
                    <input type="radio" id="des3-no" name="2.1.3id" value="N"><label for="des3-no">No</label>
                    <input type="radio" id="des3-na" name="2.1.3id" value="NA"><label for="des3-na">N/A</label>
                    <input type="radio" id="des3-nc" name="2.1.3id" value="NC"><label for="des3-nc">NC</label>
                </div>
            </div>

           <!-- Question 4 -->
<div class="question">
    <label>4. Is effective modularity achieved and modules are functionally independent?</label>
    <div class="radio-group">
        <input type="radio" id="des4-yes" name="2.1.4id" value="Y" required><label for="des4-yes">Yes</label>
        <input type="radio" id="des4-no" name="2.1.4id" value="N"><label for="des4-no">No</label>
        <input type="radio" id="des4-na" name="2.1.4id" value="NA"><label for="des4-na">N/A</label>
        <input type="radio" id="des4-nc" name="2.1.4id" value="NC"><label for="des4-nc">NC</label>
    </div>
</div>

<!-- Question 5 -->
<div class="question">
    <label>5. Are structural diagrams (Class, Object, etc.) well defined and understood?</label>
    <div class="radio-group">
        <input type="radio" id="des5-yes" name="2.1.5id" value="Y" required><label for="des5-yes">Yes</label>
        <input type="radio" id="des5-no" name="2.1.5id" value="N"><label for="des5-no">No</label>
        <input type="radio" id="des5-na" name="2.1.5id" value="NA"><label for="des5-na">N/A</label>
        <input type="radio" id="des5-nc" name="2.1.5id" value="NC"><label for="des5-nc">NC</label>
    </div>
</div>

<!-- Question 6 -->
<div class="question">
    <label>6. Are all class associations clearly defined and understood? (Is it clear which classes provide which services)?</label>
    <div class="radio-group">
        <input type="radio" id="des6-yes" name="2.1.6id" value="Y" required><label for="des6-yes">Yes</label>
        <input type="radio" id="des6-no" name="2.1.6id" value="N"><label for="des6-no">No</label>
        <input type="radio" id="des6-na" name="2.1.6id" value="NA"><label for="des6-na">N/A</label>
        <input type="radio" id="des6-nc" name="2.1.6id" value="NC"><label for="des6-nc">NC</label>
    </div>
</div>

<!-- Question 7 -->
<div class="question">
    <label>7. Are the classes in the class diagram clear? (What they represent in the architecture design document?)</label>
    <div class="radio-group">
        <input type="radio" id="des7-yes" name="2.1.7id" value="Y" required><label for="des7-yes">Yes</label>
        <input type="radio" id="des7-no" name="2.1.7id" value="N"><label for="des7-no">No</label>
        <input type="radio" id="des7-na" name="2.1.7id" value="NA"><label for="des7-na">N/A</label>
        <input type="radio" id="des7-nc" name="2.1.7id" value="NC"><label for="des7-nc">NC</label>
    </div>
</div>

<!-- Question 8 -->
<div class="question">
    <label>8. Is inheritance appropriately used?</label>
    <div class="radio-group">
        <input type="radio" id="des8-yes" name="2.1.8id" value="Y" required><label for="des8-yes">Yes</label>
        <input type="radio" id="des8-no" name="2.1.8id" value="N"><label for="des8-no">No</label>
        <input type="radio" id="des8-na" name="2.1.8id" value="NA"><label for="des8-na">N/A</label>
        <input type="radio" id="des8-nc" name="2.1.8id" value="NC"><label for="des8-nc">NC</label>
    </div>
</div>

<!-- Question 9 -->
<div class="question">
    <label>9. Are the multiplicities in the use case diagram depicted in the class diagram?</label>
    <div class="radio-group">
        <input type="radio" id="des9-yes" name="2.1.9id" value="Y" required><label for="des9-yes">Yes</label>
        <input type="radio" id="des9-no" name="2.1.9id" value="N"><label for="des9-no">No</label>
        <input type="radio" id="des9-na" name="2.1.9id" value="NA"><label for="des9-na">N/A</label>
        <input type="radio" id="des9-nc" name="2.1.9id" value="NC"><label for="des9-nc">NC</label>
    </div>
</div>

<!-- Question 10 -->
<div class="question">
    <label>10. Are behavioral diagrams (use case, sequence, activity, etc.) well defined and understood?</label>
    <div class="radio-group">
        <input type="radio" id="des10-yes" name="2.1.10id" value="Y" required><label for="des10-yes">Yes</label>
        <input type="radio" id="des10-no" name="2.1.10id" value="N"><label for="des10-no">No</label>
        <input type="radio" id="des10-na" name="2.1.10id" value="NA"><label for="des10-na">N/A</label>
        <input type="radio" id="des10-nc" name="2.1.10id" value="NC"><label for="des10-nc">NC</label>
    </div>
</div>

<!-- Question 11 -->
<div class="question">
    <label>11. Is aggregation/containment (if used) clearly defined and understood?</label>
    <div class="radio-group">
        <input type="radio" id="des11-yes" name="2.1.11id" value="Y" required><label for="des11-yes">Yes</label>
        <input type="radio" id="des11-no" name="2.1.11id" value="N"><label for="des11-no">No</label>
        <input type="radio" id="des11-na" name="2.1.11id" value="NA"><label for="des11-na">N/A</label>
        <input type="radio" id="des11-nc" name="2.1.11id" value="NC"><label for="des11-nc">NC</label>
    </div>
</div>

<!-- Question 12 -->
<div class="question">
    <label>12. Does each case have clearly defined actors and input/output?</label>
    <div class="radio-group">
        <input type="radio" id="des12-yes" name="2.1.12id" value="Y" required><label for="des12-yes">Yes</label>
        <input type="radio" id="des12-no" name="2.1.12id" value="N"><label for="des12-no">No</label>
        <input type="radio" id="des12-na" name="2.1.12id" value="NA"><label for="des12-na">N/A</label>
        <input type="radio" id="des12-nc" name="2.1.12id" value="NC"><label for="des12-nc">NC</label>
    </div>
</div>

<!-- Question 13 -->
<div class="question">
    <label>13. Is all concurrent processing (if used) clearly understood and reflected in the sequence diagrams?</label>
    <div class="radio-group">
        <input type="radio" id="des13-yes" name="2.1.13id" value="Y" required><label for="des13-yes">Yes</label>
        <input type="radio" id="des13-no" name="2.1.13id" value="N"><label for="des13-no">No</label>
        <input type="radio" id="des13-na" name="2.1.13id" value="NA"><label for="des13-na">N/A</label>
        <input type="radio" id="des13-nc" name="2.1.13id" value="NC"><label for="des13-nc">NC</label>
    </div>
</div>

<!-- Question 14 -->
<div class="question">
    <label>14. Are all objects used in sequence diagram?</label>
    <div class="radio-group">
        <input type="radio" id="des14-yes" name="2.1.14id" value="Y" required><label for="des14-yes">Yes</label>
        <input type="radio" id="des14-no" name="2.1.14id" value="N"><label for="des14-no">No</label>
        <input type="radio" id="des14-na" name="2.1.14id" value="NA"><label for="des14-na">N/A</label>
        <input type="radio" id="des14-nc" name="2.1.14id" value="NC"><label for="des14-nc">NC</label>
    </div>
</div>

<!-- Question 15 -->
<div class="question">
    <label>15. Does the sequence diagram match class diagram?</label>
    <div class="radio-group">
        <input type="radio" id="des15-yes" name="2.1.15id" value="Y" required><label for="des15-yes">Yes</label>
        <input type="radio" id="des15-no" name="2.1.15id" value="N"><label for="des15-no">No</label>
        <input type="radio" id="des15-na" name="2.1.15id" value="NA"><label for="des15-na">N/A</label>
        <input type="radio" id="des15-nc" name="2.1.15id" value="NC"><label for="des15-nc">NC</label>
    </div>
</div>

<!-- Question 16 -->
<div class="question">
    <label>16. Are the symbols used in all diagrams correspond to UML standards?</label>
    <div class="radio-group">
        <input type="radio" id="des16-yes" name="2.1.16id" value="Y" required><label for="des16-yes">Yes</label>
        <input type="radio" id="des16-no" name="2.1.16id" value="N"><label for="des16-no">No</label>
        <input type="radio" id="des16-na" name="2.1.16id" value="NA"><label for="des16-na">N/A</label>
        <input type="radio" id="des16-nc" name="2.1.16id" value="NC"><label for="des16-nc">NC</label>
    </div>
</div>
</div>
        <div class="table-responsive">
            <h2>Students' Contribution and Performance</h2>
          
             <table>
                <thead>
                    <tr>
                        <th rowspan="2">Particulars</th>
                        <th colspan="4">Marks (25M) Group Members</th>
                    </tr>
                    <tr>
                        <th>1</th>
                        <th>2</th>
                        <th>3</th>
                        <th>4</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1. System Architecture & Literature Survey (Review-I)</td>
                        <td><input type="text" name="2.1.1" placeholder="Y/N"></td>
                        <td><input type="text" name="2.2.1" placeholder="Y/N"></td>
                        <td><input type="text" name="2.3.1" placeholder="Y/N"></td>
                        <td><input type="text" name="2.4.1" placeholder="Y/N"></td>
                    </tr>
                    <tr>
                        <td>2. Project Design (5M)</td>
                        <td><input type="number" name="2.1.2" class="marks" data-member="1" max="5" min="0"></td>
                        <td><input type="number" name="2.2.2" class="marks" data-member="2" max="5" min="0"></td>
                        <td><input type="number" name="2.3.2" class="marks" data-member="3" max="5" min="0"></td>
                        <td><input type="number" name="2.4.2" class="marks" data-member="4" max="5" min="0"></td>
                    </tr>
                    <tr>
                        <td>3. Methodology /Algorithms and Project Features (5M)</td>
                        <td><input type="number" name="2.1.3" class="marks" data-member="1" max="5" min="0"></td>
                        <td><input type="number" name="2.2.3" class="marks" data-member="2" max="5" min="0"></td>
                        <td><input type="number" name="2.3.3" class="marks" data-member="3" max="5" min="0"></td>
                        <td><input type="number" name="2.4.3" class="marks" data-member="4" max="5" min="0"></td>
                    </tr>
                    <tr>
                        <td>4. Project Planning (2M)</td>
                        <td><input type="number" name="2.1.4" class="marks" data-member="1" max="2" min="0"></td>
                        <td><input type="number" name="2.2.4" class="marks" data-member="2" max="2" min="0"></td>
                        <td><input type="number" name="2.3.4" class="marks" data-member="3" max="2" min="0"></td>
                        <td><input type="number" name="2.4.4" class="marks" data-member="4" max="2" min="0"></td>
                    </tr>
                    <tr>
                        <td>5. Basic details of Implementation (5M)</td>
                        <td><input type="number" name="2.1.5" class="marks" data-member="1" max="5" min="0"></td>
                        <td><input type="number" name="2.2.5" class="marks" data-member="2" max="5" min="0"></td>
                        <td><input type="number" name="2.3.5" class="marks" data-member="3" max="5" min="0"></td>
                        <td><input type="number" name="2.4.5" class="marks" data-member="4" max="5" min="0"></td>
                    </tr>
                    <tr>
                        <td>6. Presentation Skills (4M)</td>
                        <td><input type="number" name="2.1.6" class="marks" data-member="1" max="4" min="0"></td>
                        <td><input type="number" name="2.2.6" class="marks" data-member="2" max="4" min="0"></td>
                        <td><input type="number" name="2.3.6" class="marks" data-member="3" max="4" min="0"></td>
                        <td><input type="number" name="2.4.6" class="marks" data-member="4" max="4" min="0"></td>
                    </tr>
                    <tr>
                        <td>7. Question and Answer (4M)</td>
                        <td><input type="number" name="2.1.7" class="marks" data-member="1" max="4" min="0"></td>
                        <td><input type="number" name="2.2.7" class="marks" data-member="2" max="4" min="0"></td>
                        <td><input type="number" name="2.3.7" class="marks" data-member="3" max="4" min="0"></td>
                        <td><input type="number" name="2.4.7" class="marks" data-member="4" max="4" min="0"></td>
                    </tr>
                    <tr>
                        <td>8. Summarization of ultimate findings of the Project</td>
                        <td><input type="text" name="2.1.8" placeholder="Y/N"></td>
                        <td><input type="text" name="2.2.8" placeholder="Y/N"></td>
                        <td><input type="text" name="2.3.8" placeholder="Y/N"></td>
                        <td><input type="text" name="2.4.8" placeholder="Y/N"></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td>Total (25M)</td>
                        <td><input type="number" name="2.1.s1" class="total" readonly></td>
                        <td><input type="number" name="2.2.s1" class="total" readonly></td>
                        <td><input type="number" name="2.3.s1" class="total" readonly></td>
                        <td><input type="number" name="2.4.s1" class="total" readonly></td>
                    </tr>
                </tfoot>
            </table>
        </div>
         <div class="comment-box">
            <label for="comments">Comments:</label>
            <textarea id="comments" name="c2" placeholder="Enter any additional comments here"></textarea>
         </div>
        <div class="button-group">
            <button type="button" id="back-review" onclick="previousReview()">Back</button>
            <button type="button" id="generate-pdf" onclick="submitForm()">Generate PDF</button>
            <button type="button" id="next-review" onclick="nextReview()">Next Review</button>
        </div>
        
    </form>
    </div>
    <script>
        // Initialize on DOM load
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedData();
            calculateTotals();
            
            // Setup event listeners
            document.querySelectorAll('.marks').forEach(input => {
                input.addEventListener('input', calculateTotals);
                input.addEventListener('change', function() {
                    validateInput(this);
                    calculateTotals();
                });
            });
        });
    
        // Calculate student totals
        function calculateTotals() {
            for (let i = 1; i <= 4; i++) {
                let total = 0;
                let isValid = true;
                
                document.querySelectorAll(`.marks[data-member="${i}"]`).forEach(input => {
                    const value = parseFloat(input.value);
                    if (isNaN(value)) {
                        isValid = false;
                        input.classList.add('error');
                    } else {
                        total += value;
                        input.classList.remove('error');
                    }
                });
                
                const totalField = document.querySelector(`.total[name="2.${i}.s1"]`);
                if (totalField) {
                    totalField.value = isValid ? total : 'Invalid';
                    totalField.classList.toggle('error', !isValid);
                }
            }
        }
    
        // Load saved form data
        function loadSavedData() {
            const savedData = sessionStorage.getItem('review2_data') || 
                             sessionStorage.getItem('review1_data') || 
                             sessionStorage.getItem('review3_data');
            if (savedData) {
                const data = JSON.parse(savedData);
                // Auto-fill all fields
                Object.entries(data).forEach(([name, value]) => {
                    const element = document.querySelector(`[name="${name}"]`) || 
                                  document.getElementById(name);
                    if (element) element.value = value;
                });
            }
        }
    
        // Validate individual input
        function validateInput(input) {
            const max = parseFloat(input.getAttribute('max')) || Infinity;
            const min = parseFloat(input.getAttribute('min')) || 0;
            let value = parseFloat(input.value);
            
            if (isNaN(value)) {
                input.value = '';
                input.classList.add('error');
                return false;
            }
            
            value = Math.max(min, Math.min(value, max));
            input.value = value;
            input.classList.remove('error');
            return true;
        }
    
        // Validate required form fields
        function validateForm() {
            let isValid = true;
            const requiredFields = ['group_id', 'date'];
            
            requiredFields.forEach(field => {
                const element = document.getElementById(field);
                if (element && !element.value.trim()) {
                    element.classList.add('error');
                    isValid = false;
                } else if (element) {
                    element.classList.remove('error');
                }
            });
    
            if (!isValid) {
                alert('Please fill all required fields');
            }
    
            return isValid;
        }
    
        // Submit form to generate PDF
        async function submitForm() {
            if (!validateForm()) return;
    
            try {
                const submitBtn = document.getElementById('generate-pdf');
                submitBtn.disabled = true;
                submitBtn.textContent = 'Generating PDF...';
    
                const formData = new FormData(document.getElementById('form-data'));
                const response = await fetch('/generate-pdf-review2', {
                    method: 'POST',
                    body: JSON.stringify(Object.fromEntries(formData)),
                    headers: { 'Content-Type': 'application/json' }
                });
    
                if (!response.ok) {
                    throw new Error(await response.text());
                }
    
                // Handle PDF download
                const blob = await response.blob();
                const url = window.URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'Review-II_Form.pdf';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                window.URL.revokeObjectURL(url);
    
            } catch (error) {
                console.error('PDF generation failed:', error);
                alert(`Failed to generate PDF: ${error.message}`);
            } finally {
                const submitBtn = document.getElementById('generate-pdf');
                if (submitBtn) {
                    submitBtn.disabled = false;
                    submitBtn.textContent = 'Generate PDF';
                }
            }
        }
    
        // Navigation functions
        function nextReview() {
            saveFormData();
            window.location.href = '/review3';
        }
    
        function previousReview() {
            saveFormData();
            window.location.href = '/review1';
        }
    
        function saveFormData() {
            const formData = new FormData(document.getElementById('form-data'));
            const data = Object.fromEntries(formData.entries());
            sessionStorage.setItem('review2_data', JSON.stringify(data));
        }
        // Header hide/show on scroll functionality
let lastScrollTop = 0;
let scrollThreshold = 5;
let isHeaderVisible = true;

function handleScroll() {
    const header = document.querySelector('.page-header');
    const currentScrollTop = window.pageYOffset || document.documentElement.scrollTop;

    if (Math.abs(currentScrollTop - lastScrollTop) < scrollThreshold) {
        return;
    }

    // Hide header when scrolling down
    if (currentScrollTop > lastScrollTop && currentScrollTop > 100 && isHeaderVisible) {
        header.classList.add('hidden');
        isHeaderVisible = false;
    }
    // Show header when scrolling up
    else if (currentScrollTop < lastScrollTop && !isHeaderVisible) {
        header.classList.remove('hidden');
        isHeaderVisible = true;
    }

    // Optional: Add scrolled class for visual feedback
    if (currentScrollTop > 80) {
        header.classList.add('scrolled');
    } else {
        header.classList.remove('scrolled');
    }

    lastScrollTop = currentScrollTop;
}

// Throttling for better performance
let scrollTimer = null;
function throttledScroll() {
    if (scrollTimer) return;
    scrollTimer = setTimeout(() => {
        handleScroll();
        scrollTimer = null;
    }, 10);
}

document.addEventListener('DOMContentLoaded', function() {
    // Your existing DOMContentLoaded code...
    window.addEventListener('scroll', throttledScroll, { passive: true });
});

    </script>
    <script>
        let menuOpen = false;

        function toggleMenu() {
            const menuToggle = document.querySelector('.menu-toggle');
            const menuDropdown = document.getElementById('menuDropdown');
            
            menuOpen = !menuOpen;
            
            if (menuOpen) {
                menuToggle.classList.add('active');
                menuDropdown.classList.add('show');
            } else {
                menuToggle.classList.remove('active');
                menuDropdown.classList.remove('show');
            }
        }

        // Close menu when clicking outside
        document.addEventListener('click', function(event) {
            const menuContainer = document.querySelector('.menu-container');
            
            if (!menuContainer.contains(event.target) && menuOpen) {
                toggleMenu();
            }
        });

        // Close menu when pressing Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && menuOpen) {
                toggleMenu();
            }
        });

        // Highlight current page
        document.addEventListener('DOMContentLoaded', function() {
            const currentPath = window.location.pathname;
            const menuItems = document.querySelectorAll('.menu-item');
            
            menuItems.forEach(item => {
                if (item.getAttribute('href') === currentPath) {
                    item.classList.add('current');
                }
            });
        });
    </script>
</style>
</body>
</html>